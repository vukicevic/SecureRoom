<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no">
  <title>Test</title>

  <script src="resources/external/crunch.js"></script>
  <script src="resources/utils.js"></script>
  <script src="resources/random.default.js"></script>
  <script src="resources/hash.sha1.js"></script>
  <script src="resources/asymmetric.rsa.js"></script>
  <script src="key.js"></script>
</head>
<body>
<script>
  var user;
  var exporter = ExportUtil();

  function onGen(d,t) { 
    if (typeof user === "undefined") {
      user = User(Key(d, ~~(Date.now()/1000), "Test"));
    } else {
      user.ephemeral = Key(d, ~~(Date.now()/1000));

      user.master.sign(user.master);
      user.ephemeral.sign(user.master);
    }

    console.log(t);
  }
  
  KeyGen(1024, onGen, crunch)();
  KeyGen(1024, onGen, crunch)();

</script>
</body>
</html>