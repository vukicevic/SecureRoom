<html>
<head>
  <meta charset="utf-8"> 
  <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no">
  <title>SecureRoom - Tests - MPI</title>

  <script src="../resources/mpi.js"></script>
  <script src="../resources/utils.js"></script>
</head>
<body>

<dl id="results"></dl>

<script>
var p1 = [62682, 225508723, 167857025, 125386878, 94984971, 22021916, 21040629, 14179470, 87684151, 76589032, 45551762, 159218608, 69397916, 77058352, 172331229, 265370006, 152083967, 5128748, 265036220, 70456946, 48427120, 181250835, 238748625, 24163520, 164625251, 73871631, 80085533, 50116249, 184057878, 230154872, 43205874, 193178872, 36253132, 2305581, 23161571, 84103295, 205714080];
//var p1 = [62, 258758028, 221777210, 256696638, 258592671, 258117918, 77027426, 218318216, 258857788, 48474133, 118334921, 62109585, 88896518, 69687958, 205483704, 166236039, 1931508, 172341485, 17724882];
//var p1 = [2, 260736720, 227035939, 181460571, 62702399, 14973737, 250432943, 64665197, 4888645, 24001366, 247064698, 227574400, 224608001, 157080987, 98936890, 72776936, 113982640, 34007145, 13437867, 157016408, 213907817, 24672250, 224416840, 123515649, 115325939, 182718671, 237734195, 241337656, 245765912, 85909034, 103316255, 184444180, 45716560, 210919144, 18800532, 108751853, 246099170, 193187198, 251425500, 170400673, 80193431, 23367882, 219837073, 206112217, 51343121, 36812764, 27856764, 215525197, 199504575, 193056090, 85190178, 32874354, 146957459, 231553977, 233778741, 263142622, 168665867, 45439772, 155329380, 201630317, 34080724, 207822509, 11333500, 212609459, 235967194, 123210943, 148751337, 203806787, 196186245, 77867401, 206123815, 92704119, 232276097, 67130437];

var r, w, x, y;

var t = performance.now();
console.log(prime.find(p1));
console.log(performance.now()-t);

function printArray(a) {
  return a.map(function(v){return ('0'+v.toString(16)).slice(-2);}).join('');
}

function compareArrays(a, b) {
  if (a.length != b.length)
    return false;
  for (var i = 0; i < a.length; i++)
    if (a[i] !== b[i]) return false;
  return true;
}

function printSection(n) {
  var e = document.getElementById("results"),
      d = e.appendChild(document.createElement("dt"));

  d.textContent = n;
}

function printResult(r, t) {
  var e = document.getElementById('results'),
      f = e.appendChild(document.createElement("dd"));

  f.textContent = printArray(r) + " " + compareArrays(r,t);
}

/* BEGIN ADDITION TESTS */
printSection("ADDITION TESTS");

x = [62014];
y = [10754];
r = [72768];
w = mpi.add(x, y);
printResult(w, r);

x = [0x00000611];
y = [0x00002a02];
r = [0x00003013];
w = mpi.add(x, y);
printResult(w, r);
  
x = [0x1, 0xaffe611];
y = [0x00002a22];
r = [0x1, 0xb001033];
w = mpi.add(x, y);
printResult(w, r);

x = [0xea22];
y = [0xf, 0xfffe611];
r = [0x000010, 0x000D033];
w = mpi.add(x, y);
printResult(w, r);

x = [0x00fffff, 0xfffffff];
y = [0x00fffff, 0xfffffff];
r = [0x01fffff, 0xffffffe];
w = mpi.add(x, y);
printResult(w, r);
/* END ADDITION TESTS */

/* BEGIN SUBTRACTION TESTS */
printSection("SUBTRACTION TESTS");

x = [0xf23e];
y = [0x2a02];
r = [0xc83c];
w = mpi.sub(x, y);
printResult(w, r);
  
x = [0x001a];
y = [0x00ff];
r = [-0x00e5];
w = mpi.sub(x, y);
printResult(w, r);
  
x = [0xaa014, 0xf77f23e];
y = [0x11f17, 0xbfa2a02];
r = [0x980fd, 0x37dc83c];
w = mpi.sub(x, y);
printResult(w, r);
  
x = [0xf0000, 0x0000000];
y = [0x0001];
r = [0xeffff, 0xfffffff];
w = mpi.sub(x, y);
printResult(w, r);
/* END SUBTRACTION TESTS */

/* BEGIN MULTIPLICATION TESTS */
printSection("MULTIPLICATION TESTS");

x = [62014];
y = [10754];
r = [0x2, 0x7C0107C];
w = mpi.mul(x, y);
printResult(w, r);

x = [0x0a2335f];
y = [0x02a12cc];
r = [0x1aa85, 0x6739db4]; 
w = mpi.mul(x, y);
printResult(w, r);

x = [0x00ff4, 0x122335f];
y = [0x02a12cc];
r = [0x29, 0xf36d98b, 0xc739db4];
w = mpi.mul(x, y);
printResult(w, r);

x = [0x04df23e];
y = [0x2a027, 0x12b3941];
r = [0x000cca, 0x7c85927, 0xd244fbe];
w = mpi.mul(x, y);
printResult(w, r);

x = [0xf, 0xf11a23e];
y = [0xf, 0xf11a23e];
r = [0xfe, 0x24226e7, 0x70e8704];
w = mpi.mul(x, y);
printResult(w, r);

x = [0xf, 0xfffffff];
y = [0xf, 0xfffffff];
r = [0xFF, 0xFFFFFE0, 0x0000001];
w = mpi.mul(x, y);
printResult(w, r);

x = [0x3, 0xcc147d1];
y = [0x5, 0xd088fed];
r = [0x16, 0x143f496, 0x1953b7d];
w = mpi.mul(x, y);
printResult(w, r);
/* END MULTIPLICATION TESTS */

/* BEGIN SQUARE TESTS */
printSection("SQUARE TESTS");

x = [0xa23e];
r = [0x6, 0x6d28704]; 
w = mpi.sqr(x);
printResult(w, r);

x = [0xf, 0xf11a23e];
r = [0xfe, 0x24226e7, 0x70e8704];
w = mpi.sqr(x);
printResult(w, r);
/* END SQUARE TESTS */

</script>

</body>
</html>